import{_ as B,i as D,j as M,k as V,H as A,N as U,$ as J,K as L,r as i,o as n,c as r,a as e,w as N,d as c,e as a,f as m,t as b,b as p,v as h,n as d,h as x,F as O,l as E}from"./index-4f2f9125.js";const q={components:{CheckIcon:D,ChevronUpDownIcon:M,Combobox:V,ComboboxButton:A,ComboboxInput:U,ComboboxOption:J,ComboboxOptions:L},data(){return{query:"",job:{id:null,title:"",description:"",amount:null,category:null,category_id:null},categories:[{id:1,name:"Software Development"},{id:2,name:"Network Administration"},{id:3,name:"Systems Administration"},{id:4,name:"Database Administration"},{id:5,name:"Cloud Computing"},{id:6,name:"Cybersecurity"},{id:7,name:"Web Development"},{id:8,name:"Information Technology Support"},{id:9,name:"Software Quality Assurance"},{id:10,name:"Data Science"},{id:11,name:"Business Intelligence"},{id:12,name:"Mobile Application Development"},{id:13,name:"Marketing"}],isLoading:!1,errors:{},showSuccessModal:!1}},computed:{filteredCategories(){return this.query===""?this.categories.slice(0,100):this.categories.filter(l=>l.name.toLowerCase().includes(this.query.toLowerCase())).slice(0,100)}},mounted(){},methods:{addJob(){this.isLoading=!0,this.errors={},this.job.category&&(this.job.category_id=this.job.category.id),this.axios.post(this.apiUrl+"jobs",this.job).then(l=>{this.showSuccessModal=!0,this.job.id=l.data.id,this.job.title="",this.job.description="",this.job.amount=null,this.job.category=null,this.job.category_id=null}).catch(l=>{l.response.data.detail[0].loc&&l.response.data.detail.forEach(s=>{this.errors[s.loc[1]]=s.msg.charAt(0).toUpperCase()+s.msg.slice(1)})}).finally(()=>{this.isLoading=!1})},closed(){this.showSuccessModal=!1,this.$router.push("/jobs/"+this.job.id)}}},W={class:"mx-auto max-w-7xl px-4 pb-12 sm:px-6 lg:px-8 py-10"},z={class:"flex justify-center"},F={class:"flex-1 max-w-2xl"},H={class:"bg-white px-6 pt-6 pb-6 shadow rounded-lg"},K={class:"flex"},T=e("label",{for:"category",class:"label mr-2"},"Job category",-1),Q={key:0,class:"text-sm text-red-600"},G={class:"relative"},P={class:"flex"},R=e("label",{for:"title",class:"label mr-2"},"Job title",-1),X={key:0,class:"text-sm text-red-600"},Y={class:"flex"},Z=e("label",{for:"amount",class:"label mr-2"},"$ Amount",-1),$={key:0,class:"text-sm text-red-600"},ee={class:"flex"},oe=e("label",{for:"description",class:"label mr-2"},"Job description",-1),te={key:0,class:"text-sm text-red-600"},se={class:"flex justify-end"};function ie(l,s,ne,le,o,u){const g=i("ComboboxInput"),y=i("ChevronUpDownIcon"),v=i("ComboboxButton"),C=i("CheckIcon"),j=i("ComboboxOption"),w=i("ComboboxOptions"),k=i("Combobox"),S=i("ButtonWithSpinner"),I=i("Modal");return n(),r("div",W,[e("div",z,[e("div",F,[e("div",H,[e("form",{onSubmit:s[5]||(s[5]=N((...t)=>u.addJob&&u.addJob(...t),["prevent"])),class:"space-y-4"},[e("div",null,[e("div",K,[T,o.errors.category_id?(n(),r("div",Q,"Select category")):c("",!0)]),a(k,{as:"div",modelValue:o.job.category,"onUpdate:modelValue":s[1]||(s[1]=t=>o.job.category=t)},{default:m(()=>[e("div",G,[a(g,{class:d("field "+(o.errors.category_id?"field-error":"")),onChange:s[0]||(s[0]=t=>o.query=t.target.value),"display-value":t=>t==null?void 0:t.name},null,8,["class","display-value"]),a(v,{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:m(()=>[a(y,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),u.filteredCategories.length>0?(n(),x(w,{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:m(()=>[(n(!0),r(O,null,E(u.filteredCategories,t=>(n(),x(j,{key:t.id,value:t,as:"template"},{default:m(({active:_,selected:f})=>[e("li",{class:d(["relative cursor-default select-none py-2 pl-8 pr-4",_?"bg-gray-100":""])},[e("span",{class:d(["block truncate",f&&"font-semibold"])},b(t.name),3),f?(n(),r("span",{key:0,class:d(["absolute inset-y-0 left-0 flex items-center pl-1.5","text-black"])},[a(C,{class:"h-5 w-5","aria-hidden":"true"})],2)):c("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):c("",!0)])]),_:1},8,["modelValue"])]),e("div",null,[e("div",P,[R,o.errors.title?(n(),r("div",X,b(o.errors.title),1)):c("",!0)]),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.job.title=t),id:"title",class:d("field "+(o.errors.title?"field-error":"")),type:"text",placeholder:"Enter job title"},null,2),[[h,o.job.title]])]),e("div",null,[e("div",Y,[Z,o.errors.amount?(n(),r("div",$,b(o.errors.amount),1)):c("",!0)]),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.job.amount=t),id:"amount",class:d("field "+(o.errors.amount?"field-error":"")),type:"text",placeholder:"Enter amount"},null,2),[[h,o.job.amount]])]),e("div",null,[e("div",ee,[oe,o.errors.description?(n(),r("div",te,b(o.errors.description),1)):c("",!0)]),p(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.job.description=t),id:"description",class:d("field h-96 "+(o.errors.description?"field-error":"")),placeholder:"Enter job description"},null,2),[[h,o.job.description]])]),e("div",se,[a(S,{loading:o.isLoading,text:"Add job"},null,8,["loading"])])],32)])]),a(I,{show:o.showSuccessModal,onClosed:u.closed,title:"Job has been added!"},null,8,["show","onClosed"])])])}const ae=B(q,[["render",ie]]);export{ae as default};
