import{_ as v,u as x,r as a,o as n,c as l,a as o,b as h,v as f,n as c,t as w,d as _,e as d,L as C,h as S,w as g,T as k}from"./index-c3548e4f.js";const M={props:[],data(){return{menu:"",user:x().user,isLoading:!1,errors:{},url:"/api/users/",showSuccessModal:!1}},mounted(){},methods:{updateProfile(){this.isLoading=!0,this.errors={};const i={first_name:this.user.first_name,last_name:this.user.last_name};this.axios.patch(this.apiUrl+"users/update-bio",i).then(e=>{this.showSuccessModal=!0,localStorage.setItem("user",JSON.stringify(this.user))}).catch(e=>{e.response.data.detail[0].loc&&e.response.data.detail.forEach(r=>{this.errors[r.loc[1]]=r.msg.charAt(0).toUpperCase()+r.msg.slice(1)})}).finally(()=>{this.isLoading=!1})}}},L={class:"bg-white px-6 pt-6 pb-6 shadow rounded-lg"},U={class:"space-y-4"},T=o("label",{for:"first_name",class:"label"}," First name ",-1),E={class:"mt-1"},B={key:0,class:"mt-2 text-sm text-red-600"},A=o("label",{for:"last_name",class:"label"}," Last name ",-1),V={class:"mt-1"},P={key:0,class:"mt-2 text-sm text-red-600"},W={class:"flex justify-end"};function N(i,e,r,b,s,m){const u=a("ButtonWithSpinner"),p=a("Modal");return n(),l("div",null,[o("div",L,[o("form",U,[o("div",null,[T,o("div",E,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.user.first_name=t),onChange:e[1]||(e[1]=t=>s.errors.first_name=null),id:"first_name",name:"first_name",type:"text",class:c("field "+(s.errors.first_name?"field-error":""))},null,34),[[f,s.user.first_name]])]),s.errors.first_name?(n(),l("p",B,w(s.errors.first_name),1)):_("",!0)]),o("div",null,[A,o("div",V,[h(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.user.last_name=t),onChange:e[3]||(e[3]=t=>s.errors.last_name=null),id:"last_name",name:"last_name",type:"text",class:c("field "+(s.errors.last_name?"field-error":""))},null,34),[[f,s.user.last_name]])]),s.errors.last_name?(n(),l("p",P,w(s.errors.last_name),1)):_("",!0)]),o("div",W,[d(u,{onClick:m.updateProfile,loading:s.isLoading,text:"Update"},null,8,["onClick","loading"])])])]),d(p,{show:s.showSuccessModal,onClosed:e[4]||(e[4]=t=>s.showSuccessModal=!1),title:"Your bio have been updated!"},null,8,["show"])])}const j=v(M,[["render",N]]),$={components:{},props:[],data(){return{password:"",new_password:"",isLoading:!1,errors:{},url:"/users/change-password/",showSuccessModal:!1}},mounted(){},methods:{changePassword(){this.isLoading=!0,this.errors={};let i={password:this.password,new_password:this.new_password};this.axios.post(this.apiUrl+"users/change-password",i).then(e=>{this.showSuccessModal=!0,this.password="",this.new_password=""}).catch(e=>{e.response.data.detail[0].loc&&e.response.data.detail.forEach(r=>{this.errors[r.loc[1]]=r.msg.charAt(0).toUpperCase()+r.msg.slice(1)})}).finally(()=>{this.isLoading=!1})}}},I={class:"bg-white px-6 pt-6 pb-6 shadow rounded-lg"},z={class:"space-y-4"},D=o("label",{for:"password",class:"label"}," Current password ",-1),Y={class:"mt-1"},F={key:0,class:"mt-2 text-sm text-red-600"},J=o("label",{for:"new_password",class:"label"}," New password ",-1),O={class:"mt-1"},q={key:0,class:"mt-2 text-sm text-red-600"},G={class:"flex justify-end"};function H(i,e,r,b,s,m){const u=a("ButtonWithSpinner"),p=a("Modal");return n(),l("div",null,[o("div",I,[o("form",z,[o("div",null,[D,o("div",Y,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.password=t),onChange:e[1]||(e[1]=t=>s.errors.password=null),id:"password",name:"password",type:"password",placeholder:"Enter current password ",class:c("field "+(s.errors.password?"field-error":""))},null,34),[[f,s.password]])]),s.errors.password?(n(),l("p",F,w(s.errors.password),1)):_("",!0)]),o("div",null,[J,o("div",O,[h(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.new_password=t),onChange:e[3]||(e[3]=t=>s.errors.new_password=null),id:"new_password",name:"new_password",type:"password",placeholder:"Enter new password ",class:c("field "+(s.errors.new_password?"field-error":""))},null,34),[[f,s.new_password]])]),s.errors.new_password?(n(),l("p",q,w(s.errors.new_password),1)):_("",!0)]),o("div",G,[d(u,{onClick:m.changePassword,loading:s.isLoading,text:"Update"},null,8,["onClick","loading"])])])]),d(p,{show:s.showSuccessModal,onClosed:e[4]||(e[4]=t=>s.showSuccessModal=!1),title:"Password has been changed!"},null,8,["show"])])}const K=v($,[["render",H]]),Q={components:{LoadingIcon:C},props:[],data(){return{menu:"",user:null,isLoading:!1,errors:{},url:"/api/users/",showSuccessModal:!1,newImage:null}},mounted(){this.user=x().user},methods:{updateEmail(){this.isLoading=!0,this.errors={};let i={email:this.user.email};this.axios.patch(this.apiUrl+"users/update-email",i).then(e=>{x().setUser(e.data),this.axios.defaults.headers.common.Authorization=`Bearer ${this.user.token}`,this.showSuccessModal=!0}).catch(e=>{e.response.data.detail[0].loc&&e.response.data.detail.forEach(r=>{this.errors[r.loc[1]]=r.msg.charAt(0).toUpperCase()+r.msg.slice(1)})}).finally(()=>{this.isLoading=!1})}}},R={key:0,class:"bg-white px-6 pt-6 pb-6 shadow rounded-lg flex flex-col"},X={class:"space-y-4"},Z=o("label",{for:"user-email",class:"label"}," E-mail ",-1),ss={class:"mt-1"},es={key:0,class:"mt-2 text-sm text-red-600"},os={class:"flex justify-end"};function ts(i,e,r,b,s,m){const u=a("ButtonWithSpinner"),p=a("Modal");return n(),l("div",null,[s.user?(n(),l("div",R,[o("form",X,[o("div",null,[Z,o("div",ss,[h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.user.email=t),onChange:e[1]||(e[1]=t=>s.errors.email=null),id:"user-email",name:"email",type:"text",class:c("field "+(s.errors.email?"field-error":""))},null,34),[[f,s.user.email]])]),s.errors.email?(n(),l("p",es,w(s.errors.email),1)):_("",!0)]),o("div",os,[d(u,{onClick:m.updateEmail,loading:s.isLoading,text:"Update"},null,8,["onClick","loading"])])])])):_("",!0),d(p,{show:s.showSuccessModal,onClosed:e[2]||(e[2]=t=>s.showSuccessModal=!1),title:"Your email has been changed!"},null,8,["show"])])}const rs=v(Q,[["render",ts]]),ns={components:{About:j,Security:K,Email:rs},data(){return{currentTab:"about"}},mounted(){},methods:{}},ls={class:"flex space-x-4 border-t border-gray-700 py-4","aria-label":"Tabs"},is={class:"flex justify-center"},as={class:"flex-1 max-w-2xl"},ds={key:0},cs={key:1},us={key:2};function ps(i,e,r,b,s,m){const u=a("About"),p=a("Security"),t=a("Email");return n(),l("div",null,[(n(),S(k,{to:"#header"},[o("nav",ls,[o("a",{onClick:e[0]||(e[0]=g(y=>s.currentTab="about",["prevent"])),href:"#",class:c("main-tab"+(s.currentTab==="about"?"-active":""))}," About ",2),o("a",{onClick:e[1]||(e[1]=g(y=>s.currentTab="account_security",["prevent"])),href:"#",class:c("main-tab"+(s.currentTab==="account_security"?"-active":""))}," Account security ",2),o("a",{onClick:e[2]||(e[2]=g(y=>s.currentTab="account_email",["prevent"])),href:"#",class:c("main-tab"+(s.currentTab==="account_email"?"-active":""))}," E-mail ",2)])])),o("div",is,[o("div",as,[s.currentTab==="about"?(n(),l("div",ds,[d(u)])):s.currentTab==="account_security"?(n(),l("div",cs,[d(p)])):s.currentTab==="account_email"?(n(),l("div",us,[d(t)])):_("",!0)])])])}const _s=v(ns,[["render",ps]]),hs={__name:"ProfileView",setup(i){return(e,r)=>(n(),S(_s))}};export{hs as default};
